"use strict";(self["webpackChunkaplikacja_sor_skok"]=self["webpackChunkaplikacja_sor_skok"]||[]).push([[377],{2442:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var l=a(2494),o=a(5626);const r={class:"q-gutter-y-md q-col-gutter-md q-pa-md fit row wrap justify-center items-start content-start"},s={class:"col-grow col-sm-9"},n={class:"text-center text-h3"},i={class:"text-center text-h3"},u={class:"text-center text-h5"},c=(0,l._)("p",{class:"text-center text-subtitle1"},"Wybierz:",-1),d={class:"q-gutter-md q-pb-xl row justify-center"},b=(0,l._)("h1",{class:"text-center text-h3"},"Zmień liczbę butelek",-1),m={class:"q-gutter-md row justify-center"},g={key:0,class:"q-gutter-md q-pa-sm"},p={class:"row justify-center button-label q-gutter-xs"},h={class:"col-12 row"};function w(e,t,a,w,L,y){const f=(0,l.up)("q-btn"),k=(0,l.up)("LineChart"),v=(0,l.up)("q-badge"),C=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(C,null,{default:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l._)("div",s,[(0,l._)("div",null,[(0,l._)("h1",n,"Witaj "+(0,o.zw)(e.email),1),(0,l._)("h1",i," Butelki "+(0,o.zw)(e.returnBottleCapasityLabel(e.bottleType)),1),(0,l._)("h1",u," Ilość: "+(0,o.zw)(e.points[(new Date).getMonth()]),1),c,(0,l._)("div",d,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.buttonData,(t=>((0,l.wg)(),(0,l.j4)(f,{key:`bottle-${t}`,class:"bg-primary text-white",size:"lg",onClick:a=>e.getAmountOfBottles(t),label:e.returnBottleCapasityLabel(t)},null,8,["onClick","label"])))),128))]),(0,l.Wm)(k,{chartData:e.chartData},null,8,["chartData"]),(0,l._)("div",null,[b,(0,l._)("div",m,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.buttonData,((t,a)=>((0,l.wg)(),(0,l.iD)("div",{key:`bottle-add-${t}`},["Sum"!=t?((0,l.wg)(),(0,l.iD)("div",g,[(0,l.Wm)(f,{class:"bg-primary text-white button-label",label:e.returnBottleCapasityLabel(t),size:"lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{color:e.sameTypeBottlesSum[a]>=0?"green":"red",floating:"",label:e.sameTypeBottlesSum[a],class:"text-subtitle1"},null,8,["color","label"])])),_:2},1032,["label"]),(0,l._)("div",p,[(0,l.Wm)(f,{icon:"add",class:"bg-primary text-white",onClick:t=>e.sameTypeBottlesSum[a]++,size:"lg"},null,8,["onClick"]),(0,l.Wm)(f,{icon:"remove",class:"bg-primary text-white",onClick:t=>e.sameTypeBottlesSum[a]--,size:"lg"},null,8,["onClick"])])])):(0,l.kq)("",!0)])))),128)),(0,l._)("div",h,[(0,l.Wm)(f,{class:"full-width bg-primary text-white",label:"Zatwierdz",size:"lg",onClick:t[0]||(t[0]=t=>e.addBottlesToDataBase())})])])])])])])])),_:1})}a(71);var L=a(3920),y=a(8867),f=a(9682),k=a(2490),v=a(4434);L.Chart.register(...L.registerables);const C=(0,l.aZ)({name:"PageIndex",components:{LineChart:y.LineChart},setup(){const e=["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],t=(0,f.iH)([]),a=(0,f.iH)("2L"),o=(0,f.iH)(""),r=(0,f.iH)([0,0,0,0,0,0]),s=(0,f.iH)({labels:e,datasets:[{label:"Ilość butelek",data:t,fill:!0,backgroundColor:["rgb(52, 73, 94,0.10)"],borderColor:"rgb(52, 73, 94,1)"}]});function n(e){console.log("~ aData",e.data());let t=[0,0,0,0,0,0,0,0,0,0,0,0],{Two:a,One75L:l,One5L:o,One:r,Zero75L:s,Zero5L:n}=e.data();for(let i=0;i<12;i++)t[i]+=a[i]+l[i]+o[i]+r[i]+s[i]+n[i];return t}function i(e){let{Two:t,One75L:a,One5L:l,One:o,Zero75L:s,Zero5L:n}=e.data(),i=[t,a,l,o,s,n];i.forEach(((e,t)=>{r.value[t]=e.reduce(((e,t)=>e+t),0)}))}function u(e="Sum"){k.auth.onAuthStateChanged((async l=>{if(l){let r=await k.db.collection("users").doc(null===l||void 0===l?void 0:l.uid).get();i(r),t.value="Sum"===e?n(r):r.data()[e],o.value=r.data().email,a.value=e}}))}return(0,l.bv)((()=>{u()})),{chartData:s,getAmountOfBottles:u,bottleType:a,points:t,email:o,sameTypeBottlesSum:r}},data(){return{buttonData:["Two","One75L","One5L","One","Zero75L","Zero5L","Sum"]}},mounted(){this.returnBottleCapasityLabel()},methods:{async addBottlesToDataBase(){try{var e;let t=(new Date).getMonth(),[a,l,o,r,s,n]=this.sameTypeBottlesSum,i=(await k.db.collection("users").doc(null===(e=k.auth.currentUser)||void 0===e?void 0:e.uid).get()).data();i.Two[t]=a,i.One75L[t]=l,i.One5L[t]=o,i.One[t]=r,i.Zero75L[t]=s,i.Zero5L[t]=n,k.db.collection("users").doc(k.auth.currentUser.uid).update(i).then((()=>{this.$router.go()}))}catch(t){v.Z.create({message:`⚠ ${t}`,classes:"full-width text-center bg-negative"})}},returnBottleCapasityLabel(e){let t={Two:"2L",One75L:"1.75L",One5L:"1.5L",One:"1L",Zero75L:"0.75L",Zero5L:"0.5L",Sum:"Suma"};for(const[a,l]of Object.entries(t))if(e===a)return l}}});var x=a(4260),B=a(4379),_=a(4607),O=a(9721),Z=a(7518),z=a.n(Z);const D=(0,x.Z)(C,[["render",w]]),S=D;z()(C,"components",{QPage:B.Z,QBtn:_.Z,QBadge:O.Z})}}]);
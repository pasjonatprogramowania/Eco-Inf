"use strict";(self["webpackChunkecoinf"]=self["webpackChunkecoinf"]||[]).push([[651],{290:(t,e,a)=>{a.d(e,{Z:()=>B});var o=a(2494),l=a(5626);const r={class:"col-grow col-sm-9"},n=(0,o._)("h1",{class:"text-center text-h2"},"Statystyki projektu",-1),s={class:"text-center text-h3"},i={class:"text-center text-h5"},c=(0,o._)("p",{class:"text-center text-subtitle1"},"Wybierz:",-1),u={class:"q-gutter-md q-pb-xl row justify-center"};function d(t,e,a,d,h,b){const m=(0,o.up)("q-btn"),p=(0,o.up)("LineChart");return(0,o.wg)(),(0,o.iD)("div",r,[n,(0,o._)("div",null,[(0,o._)("h1",s," Butelki "+(0,l.zw)(b.returnBottleCapasityLabel(a.bottleTypeToShowInChart)),1),(0,o._)("h1",i,"Ilość: "+(0,l.zw)(b.returnPointsSum()),1),c,(0,o._)("div",u,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.chartButtonsLabels,(t=>((0,o.wg)(),(0,o.j4)(m,{key:`bottle-${t}`,class:"bg-primary text-white",size:"lg",onClick:e=>b.getBottleAmount(t),label:b.returnBottleCapasityLabel(t)},null,8,["onClick","label"])))),128))]),(0,o.Wm)(p,{chartData:a.chartData},null,8,["chartData"])])])}a(71);var h=a(3920),b=a(8867);h.Chart.register(...h.registerables);const m={components:{LineChart:b.LineChart},props:{chartData:Object,chartButtonsLabels:Array,points:Array,bottleTypeToShowInChart:String},methods:{returnPointsSum(){const t=(t,e)=>t+e;return this.points.reduce(t)},getBottleAmount(t){this.$emit("getBottleAmount",t)},returnBottleCapasityLabel(t){let e={Two:"2L",One75L:"1.75L",One5L:"1.5L",One:"1L",Zero75L:"0.75L",Zero5L:"0.5L",Sum:"Suma"};for(const[a,o]of Object.entries(e))if(t===a)return o}}};var p=a(4260),L=a(4607),g=a(7518),w=a.n(g);const y=(0,p.Z)(m,[["render",d]]),B=y;w()(m,"components",{QBtn:L.Z})},7651:(t,e,a)=>{a.r(e),a.d(e,{default:()=>f});var o=a(2494);const l={class:"q-gutter-y-md q-col-gutter-md q-pa-md fit row wrap justify-center items-start content-start"},r={class:"col-grow col-sm-9"},n=(0,o._)("h1",{class:"text-center text-h3"},"Zmień liczbę butelek",-1),s={class:"q-gutter-md row justify-center"},i={class:"q-gutter-md"},c={class:"row justify-between button-label"},u={class:"col-12 row justify-center"};function d(t,e,a,d,h,b){const m=(0,o.up)("BottleChart"),p=(0,o.up)("q-badge"),L=(0,o.up)("q-btn"),g=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(g,null,{default:(0,o.w5)((()=>[(0,o._)("div",l,[(0,o._)("div",r,[(0,o._)("div",null,[(0,o.Wm)(m,{chartData:t.chartData,chartButtonsLabels:t.chartButtonsLabels,points:t.points,bottleTypeToShowInChart:t.bottleTypeToShowInChart,onGetBottleAmount:e[0]||(e[0]=e=>t.getBottleAmount(e))},null,8,["chartData","chartButtonsLabels","points","bottleTypeToShowInChart"]),(0,o._)("div",null,[n,(0,o._)("div",s,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.addingBottlesLabels,((e,a)=>((0,o.wg)(),(0,o.iD)("div",{key:`bottle-add-${e}`},[(0,o._)("div",i,[(0,o.Wm)(L,{class:"bg-primary text-white button-label",label:e,size:"lg"},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{color:t.sameTypeBottlesSum[a]>=0?"green":"red",floating:"",label:t.sameTypeBottlesSum[a],class:"text-subtitle1"},null,8,["color","label"])])),_:2},1032,["label"]),(0,o._)("div",c,[(0,o.Wm)(L,{icon:"add",class:"bg-primary text-white",onClick:e=>t.sameTypeBottlesSum[a]++,size:"lg"},null,8,["onClick"]),(0,o.Wm)(L,{icon:"remove",class:"bg-primary text-white",onClick:e=>t.subtractBottles(a),size:"lg"},null,8,["onClick"])])])])))),128)),(0,o._)("div",u,[(0,o.Wm)(L,{class:"full-width bg-primary text-white",label:"Zatwierdz",size:"lg",onClick:e[1]||(e[1]=e=>t.addBottlesToDataBase())})])])])])])])])),_:1})}a(71);var h=a(290),b=a(9682),m=a(2490);const p=(0,o.aZ)({name:"PageIndex",components:{BottleChart:h.Z},setup(){const t=["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],e=["2L","1.75L","1.5L","1L","0.75L","0.5L"],a=(0,b.iH)([]),l=(0,b.iH)("2L"),r=(0,b.iH)(""),n=(0,b.iH)([0,0,0,0,0,0]),s=["Two","One75L","One5L","One","Zero75L","Zero5L","Sum"],i=(0,b.iH)({labels:t,datasets:[{label:"Ilość butelek",data:a,fill:!0,backgroundColor:["rgb(52, 73, 94,0.10)"],borderColor:"rgb(52, 73, 94,1)"}]});function c(t){let e=[0,0,0,0,0,0,0,0,0,0,0,0],{Two:a,One75L:o,One5L:l,One:r,Zero75L:n,Zero5L:s}=t.data();for(let i=0;i<12;i++)e[i]+=a[i]+o[i]+l[i]+r[i]+n[i]+s[i];return e}function u(t){let{Two:e,One75L:a,One5L:o,One:l,Zero75L:r,Zero5L:s}=t.data(),i=[e,a,o,l,r,s];i.forEach(((t,e)=>{n.value[e]=t.reduce(((t,e)=>t+e),0)}))}function d(t="Sum"){m.auth.onAuthStateChanged((async e=>{if(e){let o=await m.db.collection("users").doc(null===e||void 0===e?void 0:e.uid).get();u(o),a.value="Sum"===t?c(o):o.data()[t],r.value=o.data().email,l.value=t}}))}return(0,o.bv)((()=>{d()})),{chartData:i,getBottleAmount:d,addingBottlesLabels:e,bottleTypeToShowInChart:l,points:a,email:r,sameTypeBottlesSum:n,chartButtonsLabels:s}},methods:{subtractBottles(t){this.sameTypeBottlesSum[t]>0&&this.sameTypeBottlesSum[t]--},async addBottlesToDataBase(){try{var t;let e=(new Date).getMonth(),[a,o,l,r,n,s]=this.sameTypeBottlesSum,i=(await m.db.collection("users").doc(null===(t=m.auth.currentUser)||void 0===t?void 0:t.uid).get()).data();i.Two[e]=a,i.One75L[e]=o,i.One5L[e]=l,i.One[e]=r,i.Zero75L[e]=n,i.Zero5L[e]=s,m.db.collection("users").doc(m.auth.currentUser.uid).update(i).then((()=>{this.$router.go()}))}catch(e){errorMessage(e)}}}});var L=a(4260),g=a(4379),w=a(4607),y=a(9721),B=a(7518),v=a.n(B);const C=(0,L.Z)(p,[["render",d]]),f=C;v()(p,"components",{QPage:g.Z,QBtn:w.Z,QBadge:y.Z})}}]);
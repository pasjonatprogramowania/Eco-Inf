"use strict";(self["webpackChunkaplikacja_sor_skok"]=self["webpackChunkaplikacja_sor_skok"]||[]).push([[69],{2069:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var l=a(2494),o=a(5626);const n={class:"q-gutter-y-md q-col-gutter-md q-pa-md fit row wrap justify-center items-start content-start"},i={class:"col-grow col-sm-9"},s={class:"text-center text-h3"},r={class:"text-center text-h5"},u=(0,l._)("p",{class:"text-center text-subtitle1"},"Wybierz:",-1),c={class:"q-gutter-md q-pb-xl row justify-center"},d=(0,l._)("h1",{class:"text-h3"},"Dodaj użytkownika",-1),m={class:"q-gutter-md"},h=(0,l._)("p",null," Po dodaniu użytkownika zostaniesz automatycznie zalogowany na jego kąto ",-1),p=(0,l._)("h1",{class:"text-h3"},"Twoi Uczniowie",-1),w={class:"text-subtitle1"};function b(e,t,a,b,g,v){const L=(0,l.up)("q-btn"),f=(0,l.up)("LineChart"),k=(0,l.up)("q-input"),y=(0,l.up)("q-card"),_=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(_,null,{default:(0,l.w5)((()=>[(0,l._)("div",n,[(0,l._)("div",i,[(0,l._)("div",null,[(0,l._)("h1",s," Butelki "+(0,o.zw)(e.returnBottleCapasityLabel(e.bottleType)),1),(0,l._)("h1",r," Ilość: "+(0,o.zw)(e.points[(new Date).getMonth()]),1),u,(0,l._)("div",c,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.buttonData,(t=>((0,l.wg)(),(0,l.j4)(L,{key:`bottle-${t}`,class:"bg-primary text-white",size:"lg",onClick:a=>e.getBottleAmount(t),label:e.returnBottleCapasityLabel(t)},null,8,["onClick","label"])))),128))]),(0,l.Wm)(f,{chartData:e.chartData},null,8,["chartData"])]),d,(0,l._)("div",null,[(0,l._)("div",m,[(0,l.Wm)(k,{filled:"",label:"Email",placeholder:"",modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=t=>e.email=t)},null,8,["modelValue"]),(0,l.Wm)(k,{filled:"",label:"Haslo",modelValue:e.password,"onUpdate:modelValue":t[1]||(t[1]=t=>e.password=t)},null,8,["modelValue"]),h,(0,l.Wm)(L,{label:"Dodaj",onClick:t[2]||(t[2]=t=>e.addUserToDb()),class:"bg-primary text-white"})])]),(0,l._)("div",null,[p,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.students,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t},[e.email?((0,l.wg)(),(0,l.j4)(y,{key:0,class:"q-pa-md q-ma-md user-card row items-center"},{default:(0,l.w5)((()=>[(0,l._)("div",w,"Email: "+(0,o.zw)(e.email),1)])),_:2},1024)):(0,l.kq)("",!0)])))),128))])])])])),_:1})}a(71);var g=a(3920),v=a(8867),L=a(9682),f=a(2490),k=a(4434);g.Chart.register(...g.registerables);const y=(0,l.aZ)({name:"PageIndex",components:{LineChart:v.LineChart},setup(){const e=["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],t=(0,L.iH)([0,0,0,0,0,0,0,0,0,0,0,0]),a=(0,L.iH)("2L"),o=(0,L.iH)({labels:e,datasets:[{label:"Ilość butelek",data:t,fill:!0,backgroundColor:["rgb(52, 73, 94,0.10)"],borderColor:"rgb(52, 73, 94,1)"}]}),n=(0,L.iH)(null),i=(0,L.iH)([]);async function s(){try{var e;const t=f.auth.currentUser;if(!t)return;const a=null===t||void 0===t?void 0:t.uid;n.value=await(null===(e=(await f.db.collection("teachers").doc(a).get()).data())||void 0===e?void 0:e.team)}catch(t){console.log(t)}}function r(){f.db.collection("users").get().then((e=>{e.forEach((e=>{var t;i.value.push({uid:null===e||void 0===e?void 0:e.id,email:null===(t=e.data())||void 0===t?void 0:t.email})}))}))}function u(e){let t=[0,0,0,0,0,0,0,0,0,0,0,0],{Two:a,One75L:l,One5L:o,One:n,Zero75L:i,Zero5L:s}=e.data();for(let r=0;r<12;r++)t[r]+=a[r]+l[r]+o[r]+n[r]+i[r]+s[r];return t}async function c(e="Sum"){let l=await f.db.collection("users").get(),o=[0,0,0,0,0,0,0,0,0,0,0,0];l.forEach((t=>{var a;n.value==(null===(a=t.data())||void 0===a?void 0:a.team)&&("Sum"===e?u(t).forEach(((e,t)=>{o[t]+=e})):t.data()[e].forEach(((e,t)=>{o[t]+=e})))})),t.value=o,a.value=e}function d(){f.auth.createUserWithEmailAndPassword(this.email,this.password).then((e=>{f.db.collection("users").doc(e.user.uid).set({email:this.email,One:[0,0,0,0,0,0,0,0,0,0,0,0],One75L:[0,0,0,0,0,0,0,0,0,0,0,0],One5L:[0,0,0,0,0,0,0,0,0,0,0,0],Two:[0,0,0,0,0,0,0,0,0,0,0,0],Zero5L:[0,0,0,0,0,0,0,0,0,0,0,0],Zero75L:[0,0,0,0,0,0,0,0,0,0,0,0],team:n.value}).then((()=>{this.$router.push("/statystyki")})).catch((e=>{k.Z.create({message:`⚠ ${e}`,classes:"full-width text-center bg-negative"})}))})).catch((e=>{k.Z.create({message:`⚠ ${e}`,classes:"full-width text-center bg-negative"})}))}return(0,l.bv)((async()=>{s(),c(),r()})),{chartData:o,bottleType:a,addUserToDb:d,team:n,getBottleAmount:c,students:i,points:t}},data(){return{email:"",password:"",buttonData:["Two","One75L","One5L","One","Zero75L","Zero5L","Sum"]}},methods:{returnBottleCapasityLabel(e){let t={Two:"2L",One75L:"1.75L",One5L:"1.5L",One:"1L",Zero75L:"0.75L",Zero5L:"0.5L",Sum:"Suma"};for(const[a,l]of Object.entries(t))if(e===a)return l}}});var _=a(4260),z=a(4379),C=a(4607),Z=a(6805),x=a(151),D=a(7518),q=a.n(D);const O=(0,_.Z)(y,[["render",b]]),j=O;q()(y,"components",{QPage:z.Z,QBtn:C.Z,QInput:Z.Z,QCard:x.Z})}}]);
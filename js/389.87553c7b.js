"use strict";(self["webpackChunkaplikacja_sor_skok"]=self["webpackChunkaplikacja_sor_skok"]||[]).push([[389],{3839:(t,e,a)=>{a.d(e,{N:()=>l});var o=a(4434);function l(t){o.Z.create({message:`⚠ ${t}`,classes:"full-width text-center bg-negative"})}},8890:(t,e,a)=>{a.d(e,{Z:()=>y});var o=a(3673),l=a(2323);const n={class:"col-grow col-sm-9"},r=(0,o._)("h1",{class:"text-center text-h2"},"Statystyki projektu",-1),s={class:"text-center text-h3"},i={class:"text-center text-h5"},c=(0,o._)("p",{class:"text-center text-subtitle1"},"Wybierz:",-1),u={class:"q-gutter-md q-pb-xl row justify-center"};function d(t,e,a,d,h,m){const p=(0,o.up)("q-btn"),b=(0,o.up)("LineChart");return(0,o.wg)(),(0,o.iD)("div",n,[r,(0,o._)("div",null,[(0,o._)("h1",s," Butelki "+(0,l.zw)(m.returnBottleCapasityLabel(a.bottleTypeToShowInChart)),1),(0,o._)("h1",i," Ilość: "+(0,l.zw)(a.points[(new Date).getMonth()]),1),c,(0,o._)("div",u,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.chartButtonsLabels,(t=>((0,o.wg)(),(0,o.j4)(p,{key:`bottle-${t}`,class:"bg-primary text-white",size:"lg",onClick:e=>m.getBottleAmount(t),label:m.returnBottleCapasityLabel(t)},null,8,["onClick","label"])))),128))]),(0,o.Wm)(b,{chartData:a.chartData},null,8,["chartData"])])])}a(71);var h=a(3920),m=a(8867);h.Chart.register(...h.registerables);const p={components:{LineChart:m.LineChart},props:{chartData:Object,chartButtonsLabels:Array,points:Array,bottleTypeToShowInChart:String},methods:{getBottleAmount(t){this.$emit("getBottleAmount",t)},returnBottleCapasityLabel(t){let e={Two:"2L",One75L:"1.75L",One5L:"1.5L",One:"1L",Zero75L:"0.75L",Zero5L:"0.5L",Sum:"Suma"};for(const[a,o]of Object.entries(e))if(t===a)return o}}};var b=a(4260),w=a(4607),g=a(7518),v=a.n(g);const L=(0,b.Z)(p,[["render",d]]),y=L;v()(p,"components",{QBtn:w.Z})},8389:(t,e,a)=>{a.r(e),a.d(e,{default:()=>T});var o=a(3673),l=a(2323);const n={class:"q-gutter-y-md q-col-gutter-md q-pa-md fit row wrap justify-center items-start content-start"},r={class:"col-grow col-sm-9"},s=(0,o._)("h1",{class:"text-h3"},"Dodaj użytkownika",-1),i={class:"q-gutter-md"},c=(0,o._)("p",null," Po dodaniu użytkownika zostaniesz automatycznie zalogowany na jego kąto ",-1),u=(0,o._)("h1",{class:"text-h3"},"Twoi Uczniowie",-1),d={class:"text-subtitle1"};function h(t,e,a,h,m,p){const b=(0,o.up)("BottleChart"),w=(0,o.up)("q-input"),g=(0,o.up)("q-btn"),v=(0,o.up)("q-card"),L=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(L,null,{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o._)("div",r,[(0,o.Wm)(b,{chartData:t.chartData,chartButtonsLabels:t.chartButtonsLabels,points:t.points,bottleTypeToShowInChart:t.bottleTypeToShowInChart,onGetBottleAmount:e[0]||(e[0]=e=>t.getBottleAmount(e))},null,8,["chartData","chartButtonsLabels","points","bottleTypeToShowInChart"]),s,(0,o._)("div",null,[(0,o._)("div",i,[(0,o.Wm)(w,{filled:"",label:"Email",placeholder:"",modelValue:t.email,"onUpdate:modelValue":e[1]||(e[1]=e=>t.email=e)},null,8,["modelValue"]),(0,o.Wm)(w,{filled:"",label:"Haslo",modelValue:t.password,"onUpdate:modelValue":e[2]||(e[2]=e=>t.password=e)},null,8,["modelValue"]),c,(0,o.Wm)(g,{label:"Dodaj",onClick:e[3]||(e[3]=e=>t.addUserToDb()),class:"bg-primary text-white"})])]),(0,o._)("div",null,[u,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.students,((t,e)=>((0,o.wg)(),(0,o.iD)("div",{key:e},[t.email?((0,o.wg)(),(0,o.j4)(v,{key:0,class:"q-pa-md q-ma-md user-card row items-center"},{default:(0,o.w5)((()=>[(0,o._)("div",d,"Email: "+(0,l.zw)(t.email),1)])),_:2},1024)):(0,o.kq)("",!0)])))),128))])])])])),_:1})}a(6801);var m=a(8890),p=a(2490),b=a(1959),w=a(3839);const g=(0,o.aZ)({name:"PageIndex",components:{BottleChart:m.Z},setup(){const t=["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],e=(0,b.iH)([0,0,0,0,0,0,0,0,0,0,0,0]),a=(0,b.iH)("2L"),l=(0,b.iH)({labels:t,datasets:[{label:"Ilość butelek",data:e,fill:!0,backgroundColor:["rgb(52, 73, 94,0.10)"],borderColor:"rgb(52, 73, 94,1)"}]}),n=(0,b.iH)(null),r=(0,b.iH)([]),s=["Two","One75L","One5L","One","Zero75L","Zero5L","Sum"];async function i(){try{var t;const e=p.auth.currentUser;if(!e)return;const a=null===e||void 0===e?void 0:e.uid;n.value=await(null===(t=(await p.db.collection("teachers").doc(a).get()).data())||void 0===t?void 0:t.team)}catch(e){console.log(e)}}function c(){p.db.collection("users").get().then((t=>{t.forEach((t=>{var e,a;(null===(e=t.data())||void 0===e?void 0:e.team)==n.value&&r.value.push({uid:null===t||void 0===t?void 0:t.id,email:null===(a=t.data())||void 0===a?void 0:a.email})}))}))}function u(t){let e=[0,0,0,0,0,0,0,0,0,0,0,0],{Two:a,One75L:o,One5L:l,One:n,Zero75L:r,Zero5L:s}=t.data();for(let i=0;i<12;i++)e[i]+=a[i]+o[i]+l[i]+n[i]+r[i]+s[i];return e}async function d(t="Sum"){let o=await p.db.collection("users").get(),l=[0,0,0,0,0,0,0,0,0,0,0,0];o.forEach((e=>{var a;console.log("~ doc",e),n.value===(null===(a=e.data())||void 0===a?void 0:a.team)&&("Sum"===t?u(e).forEach(((t,e)=>{l[e]+=t})):e.data()[t].forEach(((t,e)=>{l[e]+=t})))})),e.value=l,a.value=t}function h(){p.auth.createUserWithEmailAndPassword(this.email.trim(),this.password.trim()).then((t=>{p.db.collection("users").doc(t.user.uid).set({email:this.email,One:[0,0,0,0,0,0,0,0,0,0,0,0],One75L:[0,0,0,0,0,0,0,0,0,0,0,0],One5L:[0,0,0,0,0,0,0,0,0,0,0,0],Two:[0,0,0,0,0,0,0,0,0,0,0,0],Zero5L:[0,0,0,0,0,0,0,0,0,0,0,0],Zero75L:[0,0,0,0,0,0,0,0,0,0,0,0],team:n.value}).then((()=>{this.$router.push("/uczen")})).catch((t=>{(0,w.N)(t)}))})).catch((t=>{(0,w.N)(t)}))}return(0,o.bv)((async()=>{i(),d(),c()})),{chartData:l,bottleTypeToShowInChart:a,addUserToDb:h,team:n,getBottleAmount:d,students:r,points:e,chartButtonsLabels:s}},data(){return{email:"",password:""}}});var v=a(4260),L=a(4379),y=a(6805),f=a(4607),k=a(151),C=a(7518),_=a.n(C);const B=(0,v.Z)(g,[["render",h]]),T=B;_()(g,"components",{QPage:L.Z,QInput:y.Z,QBtn:f.Z,QCard:k.Z})}}]);